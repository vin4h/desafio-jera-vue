(function(e){function t(t){for(var r,a,u=t[0],c=t[1],s=t[2],d=0,f=[];d<u.length;d++)a=u[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(f.length)f.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var u=n[a];0!==o[u]&&(r=!1)}r&&(i.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},a={app:0},o={app:0},i=[];function u(e){return c.p+"js/"+({dashboard:"dashboard",login:"login",movies:"movies",register:"register"}[e]||e)+"."+{dashboard:"d6731929",login:"31faa22a",movies:"de90526d",register:"a7583418"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={dashboard:1,login:1,movies:1,register:1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({dashboard:"dashboard",login:"login",movies:"movies",register:"register"}[e]||e)+"."+{dashboard:"6e054a40",login:"97c79b3e",movies:"74fbaa9f",register:"b738d62a"}[e]+".css",o=c.p+r,i=document.getElementsByTagName("link"),u=0;u<i.length;u++){var s=i[u],d=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(d===r||d===o))return t()}var f=document.getElementsByTagName("style");for(u=0;u<f.length;u++){s=f[u],d=s.getAttribute("data-href");if(d===r||d===o)return t()}var l=document.createElement("link");l.rel="stylesheet",l.type="text/css",l.onload=t,l.onerror=function(t){var r=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete a[e],l.parentNode.removeChild(l),n(i)},l.href=o;var h=document.getElementsByTagName("head")[0];h.appendChild(l)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=i);var s,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=u(e);var f=new Error;s=function(t){d.onerror=d.onload=null,clearTimeout(l);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;f.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",f.name="ChunkLoadError",f.type=r,f.request=a,n[1](f)}o[e]=void 0}};var l=setTimeout((function(){s({type:"timeout",target:d})}),12e4);d.onerror=d.onload=s,document.head.appendChild(d)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],d=s.push.bind(s);s.push=t,s=s.slice();for(var f=0;f<s.length;f++)t(s[f]);var l=d;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"ActionDoRegister",(function(){return x})),n.d(r,"ActionSetUser",(function(){return E}));var a={};n.r(a),n.d(a,"ActionFindUser",(function(){return G})),n.d(a,"ActionSetUser",(function(){return V})),n.d(a,"SetSelectProfileId",(function(){return $})),n.d(a,"getWatched",(function(){return H})),n.d(a,"createWatched",(function(){return N})),n.d(a,"createToWatch",(function(){return q})),n.d(a,"findAllMovies",(function(){return F})),n.d(a,"findPageMovie",(function(){return J})),n.d(a,"findPageMovieRecommended",(function(){return K})),n.d(a,"findMoviesRecommended",(function(){return z})),n.d(a,"getMaxGenreId",(function(){return Q})),n.d(a,"getGenre",(function(){return X})),n.d(a,"findMovies",(function(){return Y})),n.d(a,"getToWatch",(function(){return Z})),n.d(a,"createProfile",(function(){return ee}));var o={};n.r(o),n.d(o,"ActionDoLogin",(function(){return le})),n.d(o,"ActionCheckToken",(function(){return he})),n.d(o,"ActionLoadSession",(function(){return pe})),n.d(o,"ActionSetUser",(function(){return me})),n.d(o,"ActionSetToken",(function(){return be})),n.d(o,"ActionSignOut",(function(){return ge}));var i={};n.r(i),n.d(i,"hasToken",(function(){return ve}));n("e260"),n("e6cf"),n("cca6"),n("a79d");var u,c,s=n("2b0e"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},f=[],l=n("2877"),h={},p=Object(l["a"])(h,d,f,!1,null,null,null),m=p.exports,b=(n("99af"),n("2909")),g={login:{method:"post",url:"signin"},loadSession:{method:"post",url:"sessions"}},v=(n("d3b7"),[{path:"/",name:"login",component:function(){return n.e("login").then(n.bind(null,"3551"))}}]),w={user:{},token:""},_=n("ade3"),y="AUTH/SET_USER",S="AUTH/SET_TOKEN",k=(u={},Object(_["a"])(u,y,(function(e,t){e.user=t})),Object(_["a"])(u,S,(function(e,t){e.token=t})),u),O=(n("96cf"),n("1da1")),A=(n("d81d"),n("b64b"),n("28dd")),j={create:{method:"post",url:"users"}},R=[{path:"/register",name:"register",component:function(){return n.e("register").then(n.bind(null,"17b0"))}}],T="REGISTER/SET_USER",x=function(e,t){var n=e.dispatch;return ue.register.create(t).then((function(e){n("ActionDoRegister",e.data.user)}))},E=function(e,t){var n=e.commit;n(T,t)},P={user:{name:"",email:"",password:"",birthDate:"",facebook_id:null}},U=Object(_["a"])({},T,(function(e,t){e.user=t})),D={state:P,actions:r,mutations:U,namespaced:!0},I={loadSession:{method:"post",url:"sessions"},createProfile:{method:"post",url:"profiles"},watched:{method:"post",url:"watchedmovies/list"},createWatched:{method:"post",url:"watchedmovies"},toWatch:{method:"post",url:"watchlist/list"},createToWatch:{method:"post",url:"watchlist"},maxGenreId:{method:"post",url:"movies/maxgenre"}},M=[{path:"/dashboard",name:"dashboard",component:function(){return n.e("dashboard").then(n.bind(null,"151d"))}},{name:"dashboardMovies",path:"/dashboardmovies",component:function(){return n.e("movies").then(n.bind(null,"a0b5"))}},{path:"/watched",name:"watched",component:function(){return n.e("dashboard").then(n.bind(null,"37b3"))}},{path:"/towatch",name:"towatch",component:function(){return n.e("dashboard").then(n.bind(null,"4c7f"))}},{path:"/movies",name:"movies",component:function(){return n.e("dashboard").then(n.bind(null,"b1bd"))}},{path:"/recommended",name:"recommended",component:function(){return n.e("dashboard").then(n.bind(null,"a0d5"))}}],L="DASHBOARD/SET_LOG_USER",W="DASHBOARD/SET_PROFILE_ID",C="DASHBOARD/SET_MOVIES",B="DASHBOARD/SET_GENRE_ID",G=function(e,t){var n=e.dispatch;return ue.dashboard.loadSession(t).then((function(e){n("ActionSetUser",e.data.user)}))},V=function(e,t){var n=e.commit;n(L,t)},$=function(e,t){var n=e.commit;n(W,t)},H=function(e,t,n){var r=e.commit;return ue.dashboard.watched(t).then((function(e){r(C,e.data)}))},N=function(e,t,n){e.commit;return ue.dashboard.createWatched(t)},q=function(e,t,n){e.commit;return ue.dashboard.createToWatch(t)},F=function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(t,n,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,e.next=3,window._Vue.$http.get("https://api.themoviedb.org/3/discover/movie?api_key=ab49019e9117ee3ab19bb1fd5a1b332a").then((function(e){a(C,e.data)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),J=function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(t,n,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,console.log(n),e.next=4,window._Vue.$http.get("https://api.themoviedb.org/3/discover/movie?api_key=ab49019e9117ee3ab19bb1fd5a1b332a&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page=".concat(n)).then((function(e){a(C,e.data)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),K=function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(t,n,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,console.log(n),e.next=4,window._Vue.$http.get("https://api.themoviedb.org/3/discover/movie?api_key=ab49019e9117ee3ab19bb1fd5a1b332a&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page=".concat(n.page,"&with_genres=").concat(n.genre_id)).then((function(e){a(C,e.data)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),z=function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(t,n,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,e.next=3,window._Vue.$http.get("https://api.themoviedb.org/3/discover/movie?api_key=ab49019e9117ee3ab19bb1fd5a1b332a&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page=1&with_genres=".concat(n.genre_id,"&query=").concat(n.title)).then((function(e){a(C,e.data)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Q=function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,a=t.commit,e.next=3,ue.dashboard.maxGenreId(n).then((function(e){a(B,e.data),r("getGenre",e.data)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),X=function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,window._Vue.$http.get("https://api.themoviedb.org/3/discover/movie?api_key=ab49019e9117ee3ab19bb1fd5a1b332a&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page=1&with_genres=".concat(n)).then((function(e){r(C,e.data)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Y=function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(t,n,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,console.log(n),e.next=4,window._Vue.$http.get("https://api.themoviedb.org/3/search/movie?api_key=ab49019e9117ee3ab19bb1fd5a1b332a&language=en-US&query=".concat(n,"&page=1&include_adult=false")).then((function(e){a(C,e.data)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Z=function(e,t,n){var r=e.commit;return ue.dashboard.toWatch(t).then((function(e){r(C,e.data)}))},ee=function(e,t){var n=e.dispatch;return ue.dashboard.createProfile(t).then((function(e){n("ActionFindUser",e.data)}))},te={user:{},profile_id:"",movies:{id:"",title:"",genre:"",genre_id:"",profile_id:"",watched:"",to_watch:""},genre_id:""},ne=(c={},Object(_["a"])(c,L,(function(e,t){e.user=t})),Object(_["a"])(c,W,(function(e,t){e.profile_id=t})),Object(_["a"])(c,C,(function(e,t){e.movies=t})),Object(_["a"])(c,B,(function(e,t){e.genre_id=t})),c),re={state:te,actions:a,mutations:ne,namespaced:!0},ae={auth:g,register:j,dashboard:I};s["default"].use(A["a"]);var oe=s["default"].http;oe.options.root="https://desafiojera.herokuapp.com/",Object.keys(ae).map((function(e){ae[e]=s["default"].resource("",{},ae[e])}));var ie=function(e){oe.headers.common.Authorization="Bearer ".concat(e)},ue=ae,ce=function(e){return ie(e)},se=function(){return localStorage.getItem("token")},de=function(){return localStorage.removeItem("token")},fe=function(e){return localStorage.setItem("token",e)},le=function(e,t){var n=e.dispatch;return ue.auth.login(t).then((function(e){n("ActionSetUser",e.data.user),n("ActionSetToken",e.data.token)}))},he=function(e){var t=e.dispatch,n=e.state;if(n.token)return Promise.resolve(n.token);var r=se();return r?(t("ActionSetToken",r),t("ActionLoadSession")):Promise.reject(new Error("Token Inválido"))},pe=function(e){var t=e.dispatch,n=function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){try{var r=ue.auth.loadSession(),a=r.data.user;t("ActionSetUser",a),e()}catch(o){t("ActionSignOut"),n(o)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r=Promise.resolve(n);return r},me=function(e,t){var n=e.commit;n(y,t)},be=function(e,t){var n=e.commit;fe(t),ce(t),n(S,t)},ge=function(e){var t=e.dispatch;ce(""),de(),t("ActionSetUser",{}),t("ActionSetToken","")},ve=function(e){var t=e.token;return!!t},we={state:w,actions:o,getters:i,mutations:k,namespaced:!0},_e=[].concat(Object(b["a"])(v),Object(b["a"])(R),Object(b["a"])(M)),ye=n("8c4f"),Se=(n("b0c0"),n("2f62")),ke={auth:we,register:D,dashboard:re};s["default"].use(Se["a"]);var Oe=new Se["a"].Store({modules:ke}),Ae=function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("login"===t.name||"register"===t.name||Oe.getters["auth/hasToken"]){e.next=12;break}return e.prev=1,e.next=4,Oe.dispatch("auth/ActionCheckToken");case 4:r({name:"login"}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),r({name:"login"});case 10:e.next=13;break;case 12:"login"!==t.name&&"register"!==t.name||!Oe.getters["auth/hasToken"]?r():r({name:"dashboard"});case 13:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n,r){return e.apply(this,arguments)}}();s["default"].use(ye["a"]);var je=new ye["a"]({routes:_e});je.beforeEach(Ae);var Re=je,Te=n("b1e0"),xe=n("5f5b");n("f9e3"),n("2dd8"),n("7e7d");s["default"].config.productionTip=!1,s["default"].use(Te["a"]),s["default"].use(xe["a"]),window._Vue=new s["default"]({router:Re,store:Oe,render:function(e){return e(m)}}).$mount("#app")},"7e7d":function(e,t,n){}});
//# sourceMappingURL=app.9c51b363.js.map